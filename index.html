<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velocity Rentals | Premium Car & Bike Rental India</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and Babel CDNs for single-file execution -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons - Using UMD build correctly -->
    <script src="https://unpkg.com/lucide@0.460.0/dist/umd/lucide.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.460.0/dist/umd/lucide-react.min.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        .bg-navy { background-color: #0f172a; }
        .text-orange { color: #f97316; }
        .bg-orange { background-color: #f97316; }
        /* Custom scrollbar for premium feel */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #f97316; border-radius: 10px; }
    </style>
</head>
<body class="bg-white">
    <div id="root"></div>

    <script type="text/babel">
        // Destructure from the global window objects
        const { useState, useMemo, useEffect } = React;
        
        // Correct global for Lucide React is LucideReact (Capitalized)
        const { 
            Car, Bike, Calendar, MapPin, Search, Filter, 
            User, ShieldCheck, Clock, CreditCard, ChevronRight, 
            Menu, X, Plus, Trash2, LayoutDashboard, LogOut,
            CheckCircle2, AlertCircle, Download, QrCode, Globe
        } = window.LucideReact || {};

        // --- MOCK DATA ---
        const INITIAL_FLEET = [
            { id: 1, type: 'car', brand: 'Tesla', model: 'Model 3', price: 9500, fuel: 'EV', transmission: 'Auto', image: 'https://images.unsplash.com/photo-1560958089-b8a1929cea89?auto=format&fit=crop&q=80&w=800', location: 'Mumbai', deposit: 15000 },
            { id: 2, type: 'car', brand: 'BMW', model: 'X5', price: 15000, fuel: 'Petrol', transmission: 'Auto', image: 'https://images.unsplash.com/photo-1555215695-3004980adade?auto=format&fit=crop&q=80&w=800', location: 'Delhi', deposit: 25000 },
            { id: 3, type: 'bike', brand: 'Ducati', model: 'Monster', price: 4500, fuel: 'Petrol', transmission: 'Manual', image: 'https://images.unsplash.com/photo-1568772585407-9361f9bf3a87?auto=format&fit=crop&q=80&w=800', location: 'Bangalore', deposit: 10000 },
            { id: 4, type: 'car', brand: 'Toyota', model: 'Camry', price: 5500, fuel: 'Hybrid', transmission: 'Auto', image: 'https://images.unsplash.com/photo-1621007947382-bb3c3968e3bb?auto=format&fit=crop&q=80&w=800', location: 'Chennai', deposit: 8000 },
            { id: 5, type: 'bike', brand: 'Royal Enfield', model: 'Classic 350', price: 1200, fuel: 'Petrol', transmission: 'Manual', image: 'https://images.unsplash.com/photo-1591637333184-19aa84b3e01f?auto=format&fit=crop&q=80&w=800', location: 'Goa', deposit: 3000 },
            { id: 6, type: 'car', brand: 'Ford', model: 'Mustang', price: 12000, fuel: 'Petrol', transmission: 'Manual', image: 'https://images.unsplash.com/photo-1584345604476-8ec5e12e42dd?auto=format&fit=crop&q=80&w=800', location: 'Pune', deposit: 20000 },
        ];

        const AVAILABLE_LOCATIONS = ["Mumbai", "Delhi", "Bangalore", "Chennai", "Goa", "Pune", "Hyderabad", "Kolkata"];

        // --- COMPONENTS ---
        const Button = ({ children, onClick, variant = 'primary', className = '', disabled = false }) => {
            const baseStyle = "px-6 py-2.5 rounded-lg font-semibold transition-all duration-200 transform active:scale-95 disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-orange-500 hover:bg-orange-600 text-white shadow-lg shadow-orange-500/30",
                secondary: "bg-slate-700 hover:bg-slate-600 text-white border border-slate-600",
                outline: "border-2 border-orange-500 text-orange-500 hover:bg-orange-50",
                ghost: "text-slate-400 hover:text-white hover:bg-slate-800"
            };
            return (
                <button onClick={onClick} disabled={disabled} className={`${baseStyle} ${variants[variant]} ${className}`}>
                    {children}
                </button>
            );
        };

        const App = () => {
            const [view, setView] = useState('home'); 
            const [fleet, setFleet] = useState(INITIAL_FLEET);
            const [bookings, setBookings] = useState([]);
            const [currentUser, setCurrentUser] = useState(null); 
            const [showAuthModal, setShowAuthModal] = useState(false);
            const [searchParams, setSearchParams] = useState({ location: '', type: 'all', startDate: '', endDate: '' });
            const [filters, setFilters] = useState({ priceRange: 50000, fuel: 'all', transmission: 'all' });
            const [selectedVehicle, setSelectedVehicle] = useState(null);

            const calculateDays = (start, end) => {
                if (!start || !end) return 0;
                const days = Math.ceil((new Date(end) - new Date(start)) / (1000 * 60 * 60 * 24));
                return days > 0 ? days : 0;
            };

            const isAvailable = (vehicleId, start, end) => {
                if (!start || !end) return true;
                const s = new Date(start).getTime();
                const e = new Date(end).getTime();
                return !bookings.filter(b => b.vehicleId === vehicleId && b.status !== 'Cancelled').some(b => {
                    return (s <= new Date(b.endDate).getTime() && e >= new Date(b.startDate).getTime());
                });
            };

            const downloadInvoice = (booking) => {
                const v = booking.vehicleSnapshot;
                const text = `INVOICE: #VLC-${booking.id}\nVehicle: ${v.brand} ${v.model}\nLocation: ${v.location}\nPeriod: ${booking.startDate} to ${booking.endDate}\nTotal: ₹${booking.totalCost.toLocaleString()}`;
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Invoice_${booking.id}.txt`;
                a.click();
            };

            const handleBook = (vehicle, start, end, total) => {
                const newBooking = {
                    id: Math.floor(Math.random() * 100000),
                    vehicleId: vehicle.id,
                    startDate: start,
                    endDate: end,
                    totalCost: total,
                    status: 'Active',
                    userName: currentUser.name,
                    vehicleSnapshot: { ...vehicle }
                };
                setBookings([newBooking, ...bookings]);
                setSelectedVehicle(null);
                setView('dashboard');
            };

            const Navbar = () => (
                <nav className="bg-slate-900 border-b border-slate-800 sticky top-0 z-50">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-20">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('home')}>
                            <div className="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center shadow-lg">
                                {Car && <Car className="text-white w-6 h-6" />}
                            </div>
                            <span className="text-2xl font-bold text-white tracking-tight">Velocity<span className="text-orange-500">Rentals</span></span>
                        </div>
                        <div className="hidden md:flex items-center space-x-8">
                            {['home', 'listings', 'dashboard'].map(v => (
                                <button key={v} onClick={() => setView(v)} className={`text-sm font-medium capitalize ${view === v ? 'text-orange-500' : 'text-slate-300 hover:text-white'}`}>{v === 'listings' ? 'Fleet' : v}</button>
                            ))}
                            {currentUser?.role === 'admin' && <button onClick={() => setView('admin')} className={`text-sm font-medium ${view === 'admin' ? 'text-orange-500' : 'text-slate-300 hover:text-white'}`}>Admin</button>}
                        </div>
                        <div className="flex items-center gap-4">
                            {currentUser ? (
                                <button onClick={() => setCurrentUser(null)} className="flex items-center gap-2 text-slate-300 hover:text-white">
                                    <span className="text-sm font-bold hidden sm:inline">{currentUser.name}</span>
                                    {LogOut && <LogOut size={20} />}
                                </button>
                            ) : (
                                <Button variant="secondary" onClick={() => setShowAuthModal(true)}>Login</Button>
                            )}
                        </div>
                    </div>
                </nav>
            );

            const Hero = () => (
                <div className="relative bg-slate-900 overflow-hidden pt-20 pb-32">
                    <div className="absolute top-0 right-0 w-1/2 h-full bg-slate-800 opacity-20 skew-x-12 transform translate-x-20"></div>
                    <div className="max-w-7xl mx-auto px-4 relative z-10 text-center">
                        <h1 className="text-5xl md:text-7xl font-black text-white mb-6">Drive the <span className="text-orange-500">Extraordinary.</span></h1>
                        <p className="text-xl text-slate-400 mb-12 max-w-2xl mx-auto">India's premium marketplace for high-performance car and bike rentals. Book your next adventure in seconds.</p>
                        
                        <div className="bg-white rounded-3xl p-6 shadow-2xl max-w-4xl mx-auto border border-slate-200 grid grid-cols-1 md:grid-cols-4 gap-4 text-left">
                            <div>
                                <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">Location</label>
                                <div className="flex items-center gap-2 bg-slate-50 p-3 rounded-xl border border-slate-100">
                                    {MapPin && <MapPin className="text-orange-500 w-4 h-4" />}
                                    <input type="text" placeholder="Mumbai, Delhi..." className="bg-transparent w-full outline-none font-bold text-sm" value={searchParams.location} onChange={e => setSearchParams({...searchParams, location: e.target.value})} />
                                </div>
                            </div>
                            <div>
                                <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">Pick-up Date</label>
                                <div className="flex items-center gap-2 bg-slate-50 p-3 rounded-xl border border-slate-100">
                                    {Calendar && <Calendar className="text-orange-500 w-4 h-4" />}
                                    <input type="date" className="bg-transparent w-full outline-none font-bold text-sm" value={searchParams.startDate} onChange={e => setSearchParams({...searchParams, startDate: e.target.value})} />
                                </div>
                            </div>
                            <div>
                                <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">Category</label>
                                <div className="flex bg-slate-100 p-1 rounded-xl">
                                    <button className={`flex-1 py-1.5 rounded-lg text-xs font-black ${searchParams.type === 'car' ? 'bg-white shadow text-orange-500' : 'text-slate-400'}`} onClick={() => setSearchParams({...searchParams, type: 'car'})}>Cars</button>
                                    <button className={`flex-1 py-1.5 rounded-lg text-xs font-black ${searchParams.type === 'bike' ? 'bg-white shadow text-orange-500' : 'text-slate-400'}`} onClick={() => setSearchParams({...searchParams, type: 'bike'})}>Bikes</button>
                                </div>
                            </div>
                            <div className="flex items-end">
                                <Button className="w-full h-[46px]" onClick={() => setView('listings')}>Search Fleet</Button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar />
                    <main className="flex-1">
                        {view === 'home' && <Hero />}
                        {view === 'listings' && (
                            <div className="max-w-7xl mx-auto px-4 py-12">
                                <div className="flex justify-between items-end mb-10">
                                    <h2 className="text-4xl font-black text-slate-900 tracking-tighter">Available Fleet</h2>
                                    <span className="text-slate-400 text-sm font-bold uppercase tracking-widest">{fleet.length} total assets</span>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                    {fleet.filter(v => (!searchParams.location || v.location.toLowerCase().includes(searchParams.location.toLowerCase())) && (searchParams.type === 'all' || v.type === searchParams.type)).map(v => (
                                        <div key={v.id} className="bg-white rounded-3xl border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all group">
                                            <div className="h-56 overflow-hidden relative">
                                                <img src={v.image} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000" />
                                                <div className="absolute top-4 right-4 bg-white/90 px-3 py-1 rounded-full text-[10px] font-black uppercase shadow-sm">{v.type}</div>
                                            </div>
                                            <div className="p-8">
                                                <div className="flex justify-between items-start mb-6">
                                                    <div>
                                                        <h3 className="text-2xl font-black text-slate-900 leading-tight">{v.brand} {v.model}</h3>
                                                        <p className="text-slate-400 text-xs font-bold uppercase mt-1 flex items-center gap-1">
                                                            {MapPin && <MapPin size={12} className="text-orange-500" />} {v.location}
                                                        </p>
                                                    </div>
                                                    <div className="text-right">
                                                        <p className="text-2xl font-black text-orange-500">₹{v.price.toLocaleString()}</p>
                                                        <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">per day</p>
                                                    </div>
                                                </div>
                                                <Button className="w-full py-4" onClick={() => setSelectedVehicle(v)}>Book Now</Button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        {view === 'dashboard' && (
                            <div className="max-w-4xl mx-auto px-4 py-16">
                                <h2 className="text-4xl font-black text-slate-900 mb-12 tracking-tight">Your Garage</h2>
                                <div className="space-y-6">
                                    {bookings.map(b => (
                                        <div key={b.id} className="bg-white border border-slate-100 rounded-[32px] p-8 flex flex-col md:flex-row gap-8 items-center shadow-sm">
                                            <img src={b.vehicleSnapshot.image} className="w-full md:w-48 h-32 object-cover rounded-2xl" />
                                            <div className="flex-1 text-center md:text-left">
                                                <h3 className="text-2xl font-black text-slate-900">{b.vehicleSnapshot.brand} {b.vehicleSnapshot.model}</h3>
                                                <p className="text-slate-400 text-xs font-bold uppercase mt-1">{b.startDate} to {b.endDate}</p>
                                                <Button variant="outline" className="mt-6 py-2 px-4 text-xs h-auto" onClick={() => downloadInvoice(b)}>
                                                    {Download && <Download size={14} />} Download Invoice
                                                </Button>
                                            </div>
                                            <div className="text-right border-t md:border-t-0 md:border-l border-slate-100 pt-6 md:pt-0 md:pl-8">
                                                <p className="text-[10px] font-black text-slate-400 uppercase mb-1">Total Paid</p>
                                                <p className="text-3xl font-black text-slate-900">₹{b.totalCost.toLocaleString()}</p>
                                            </div>
                                        </div>
                                    ))}
                                    {bookings.length === 0 && <p className="text-center text-slate-400 py-20 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200">No active rentals yet.</p>}
                                </div>
                            </div>
                        )}
                        {view === 'admin' && (
                            <div className="bg-slate-950 text-white min-h-screen p-8 md:p-16">
                                <div className="max-w-7xl mx-auto flex flex-col md:flex-row gap-12">
                                    <div className="lg:w-1/3 bg-slate-900 p-8 rounded-[40px] border border-slate-800 h-fit">
                                        <h3 className="text-2xl font-black mb-8 flex items-center gap-2">
                                            {Plus && <Plus className="text-orange-500" />} New Asset
                                        </h3>
                                        <div className="space-y-4">
                                            <input placeholder="Brand" className="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800 font-bold" />
                                            <input placeholder="Model" className="w-full bg-slate-950 p-4 rounded-2xl border border-slate-800 font-bold" />
                                            <div className="grid grid-cols-2 gap-4">
                                                <select className="bg-slate-950 p-4 rounded-2xl border border-slate-800 font-bold text-xs"><option>Car</option><option>Bike</option></select>
                                                <input type="number" placeholder="₹/Day" className="bg-slate-950 p-4 rounded-2xl border border-slate-800 font-bold" />
                                            </div>
                                            <Button className="w-full py-4">Add to Fleet</Button>
                                        </div>
                                    </div>
                                    <div className="flex-1 bg-slate-900 rounded-[40px] border border-slate-800 overflow-hidden">
                                        <table className="w-full text-left">
                                            <thead className="bg-slate-950 text-slate-600 text-[10px] font-black uppercase tracking-[0.2em]"><tr className="border-b border-slate-800"><th className="p-8">Asset</th><th className="p-8">Region</th><th className="p-8">Daily Rate</th><th className="p-8 text-right">Delete</th></tr></thead>
                                            <tbody className="divide-y divide-slate-800">
                                                {fleet.map(v => (
                                                    <tr key={v.id} className="hover:bg-slate-800/50"><td className="p-8 font-black">{v.brand} {v.model}</td><td className="p-8 text-slate-400 font-bold uppercase text-xs">{v.location}</td><td className="p-8 text-orange-500 font-black">₹{v.price.toLocaleString()}</td><td className="p-8 text-right"><button onClick={() => setFleet(fleet.filter(f => f.id !== v.id))} className="text-slate-700 hover:text-red-500 transition-colors p-2">{Trash2 && <Trash2 size={18} />}</button></td></tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {selectedVehicle && (
                        <div className="fixed inset-0 bg-slate-950/95 backdrop-blur-xl z-[100] flex items-center justify-center p-4">
                            <div className="bg-white rounded-[40px] max-w-4xl w-full flex flex-col md:flex-row overflow-hidden shadow-2xl animate-in zoom-in duration-300">
                                <div className="md:w-1/2 h-64 md:h-auto relative bg-slate-900">
                                    <img src={selectedVehicle.image} className="absolute inset-0 w-full h-full object-cover opacity-60" />
                                    <div className="absolute inset-0 bg-gradient-to-t from-slate-900 flex flex-col justify-end p-12"><h2 className="text-white text-5xl font-black tracking-tighter leading-none mb-2">{selectedVehicle.brand}</h2><p className="text-orange-500 text-2xl font-bold uppercase tracking-widest">{selectedVehicle.model}</p></div>
                                </div>
                                <div className="flex-1 p-10 md:p-14">
                                    <div className="flex justify-between items-center mb-10"><h3 className="text-2xl font-black text-slate-900 uppercase tracking-tighter">Booking summary</h3><button onClick={() => setSelectedVehicle(null)}>{X && <X size={24} />}</button></div>
                                    <div className="space-y-8">
                                        <div className="grid grid-cols-2 gap-6">
                                            <div className="space-y-2"><label className="text-[10px] font-black uppercase tracking-widest text-slate-400">Pickup</label><input id="startD" type="date" className="w-full bg-slate-50 border rounded-2xl p-4 font-bold outline-none focus:ring-2 focus:ring-orange-500" defaultValue={searchParams.startDate} /></div>
                                            <div className="space-y-2"><label className="text-[10px] font-black uppercase tracking-widest text-slate-400">Return</label><input id="endD" type="date" className="w-full bg-slate-50 border rounded-2xl p-4 font-bold outline-none focus:ring-2 focus:ring-orange-500" /></div>
                                        </div>
                                        <div className="bg-slate-50 p-8 rounded-[32px] border flex justify-between items-end">
                                            <div><p className="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1">Security Deposit (Refundable)</p><p className="font-bold text-slate-900">₹{selectedVehicle.deposit.toLocaleString()}</p></div>
                                            <div className="text-right"><p className="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-1">Daily Rate</p><p className="text-3xl font-black text-orange-500">₹{selectedVehicle.price.toLocaleString()}</p></div>
                                        </div>
                                        <Button className="w-full py-5 text-xl" onClick={() => {
                                            const s = document.getElementById('startD').value;
                                            const e = document.getElementById('endD').value;
                                            const d = calculateDays(s, e);
                                            if (!s || !e || d <= 0) { alert('Please select valid dates'); return; }
                                            if (!currentUser) { setShowAuthModal(true); return; }
                                            handleBook(selectedVehicle, s, e, (d * selectedVehicle.price) + selectedVehicle.deposit);
                                        }}>Confirm & Pay</Button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {showAuthModal && (
                        <div className="fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[200] flex items-center justify-center p-4">
                            <div className="bg-white rounded-3xl w-full max-w-md p-10 shadow-2xl relative">
                                <button onClick={() => setShowAuthModal(false)} className="absolute right-6 top-6 text-slate-400 hover:text-slate-600">{X && <X />}</button>
                                <h2 className="text-3xl font-black text-slate-900 mb-8 tracking-tighter">Velocity Login</h2>
                                <form onSubmit={e => {
                                    e.preventDefault();
                                    const em = e.target.email.value;
                                    const pw = e.target.password.value;
                                    if (em === 'admin@gmail.com' && pw === '1') {
                                        setCurrentUser({ name: 'Admin', email: em, role: 'admin' });
                                    } else {
                                        setCurrentUser({ name: 'Explorer', email: em, role: 'user' });
                                    }
                                    setShowAuthModal(false);
                                }} className="space-y-4">
                                    <input required name="email" type="email" placeholder="Email (Admin: admin@gmail.com)" className="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:border-orange-500 font-bold" />
                                    <input required name="password" type="password" placeholder="Password (Admin: 1)" className="w-full p-4 border border-slate-200 rounded-2xl outline-none focus:border-orange-500 font-bold" />
                                    <Button type="submit" className="w-full py-4 text-lg mt-4">Sign In</Button>
                                </form>
                            </div>
                        </div>
                    )}

                    <footer className="bg-slate-950 text-slate-600 py-24">
                        <div className="max-w-7xl mx-auto px-4 text-center">
                            <div className="flex items-center justify-center gap-2 mb-6">
                                <div className="w-10 h-10 bg-orange-500 rounded-xl flex items-center justify-center">
                                    {Car && <Car className="text-white w-6 h-6" />}
                                </div>
                                <span className="text-3xl font-black text-white tracking-tighter">Velocity<span className="text-orange-500">Rentals</span></span>
                            </div>
                            <p className="text-xs font-black uppercase tracking-widest leading-loose">Premium Car & Bike Rental Solutions India.<br/>© 2024 Velocity Systems. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
